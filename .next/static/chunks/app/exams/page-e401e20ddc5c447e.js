(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[881],{73814:(e,s,a)=>{"use strict";a.d(s,{default:()=>A});var t=a(95155),r=a(12115),l=a(83209),d=a(97003),i=a(67812),c=a(90368),n=a(27937),m=a(24693),x=a(25016);function o(e){let{className:s,classNames:a,showOutsideDays:r=!0,...l}=e;return(0,t.jsx)(m.hv,{showOutsideDays:r,className:(0,x.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,x.cn)((0,d.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,x.cn)((0,d.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:s,...a}=e;return(0,t.jsx)(c.A,{className:(0,x.cn)("h-4 w-4",s),...a})},IconRight:e=>{let{className:s,...a}=e;return(0,t.jsx)(n.A,{className:(0,x.cn)("h-4 w-4",s),...a})}},...l})}o.displayName="Calendar";var h=a(54679),u=a(33789),p=a(90235),j=a(5917),g=a(91169),f=a(37772),b=a(6191),N=a(63581),v=a(26983),w=a(7220),y=a(30926);let _=(0,y.createServerReference)("40d1f885144ef240eb5d01f859f3cfd1205e11d6f6",y.callServer,void 0,y.findSourceMapURL,"createExam");var k=a(28171);let C=["bg-pastel-lavender border-pastel-lavender-border","bg-pastel-mint border-pastel-mint-border","bg-pastel-peach border-pastel-peach-border","bg-pastel-cream border-pastel-cream-border","bg-pastel-sky border-pastel-sky-border"],E=["Jan","Feb","March","April","May","June","July"];function D(e){var s,a,r;let{exam:l}=e;return(0,t.jsxs)("div",{className:"p-4 rounded-xl border ".concat(C[l.colorIndex%C.length]," transition-all hover:shadow-md"),"data-testid":"card-exam-".concat(l.id),children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-3",children:[(0,t.jsx)(i.E,{variant:"outline",className:"text-xs font-medium bg-white/50 dark:bg-black/20",children:(null==(s=l.class)?void 0:s.className)||"Class"}),(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:(null==(a=l.class)?void 0:a.className)||"Unknown Class"})]}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mb-1",children:l.startTime}),(0,t.jsxs)("div",{className:"mt-3 p-3 bg-white/60 dark:bg-black/20 rounded-lg",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:l.examType}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Grade ",(null==(r=l.class)?void 0:r.grade)||"?"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between mt-3 pt-3 border-t border-black/5 dark:border-white/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[l.confirmed?(0,t.jsxs)("div",{className:"flex items-center gap-1 text-emerald-600 dark:text-emerald-400",children:[(0,t.jsx)(j.A,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"text-xs font-medium",children:"Confirmed"})]}):(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"Pending"}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,t.jsx)(g.A,{className:"h-3.5 w-3.5"}),(0,t.jsx)("span",{className:"text-xs",children:l.studentCount||0})]})]}),(0,t.jsxs)(w.rI,{children:[(0,t.jsx)(w.ty,{asChild:!0,children:(0,t.jsx)(d.$,{variant:"ghost",size:"icon",className:"h-7 w-7","data-testid":"button-exam-menu-".concat(l.id),children:(0,t.jsx)(f.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(w.SQ,{align:"end",children:[(0,t.jsx)(w._2,{children:"Edit"}),(0,t.jsx)(w._2,{children:"Reschedule"}),(0,t.jsx)(w._2,{className:"text-destructive",children:"Delete"})]})]})]})]})}function A(e){let{initialExams:s}=e,[a,m]=(0,r.useState)(new Date),[x,j]=(0,r.useState)("Feb"),[g,f]=(0,r.useState)(!1),{toast:w}=(0,k.useToast)(),y=s.map((e,s)=>({...e,colorIndex:s%C.length,row:Math.floor(s/3)+1,examDate:new Date(e.examDate)})),A=y.reduce((e,s)=>(e[s.row]||(e[s.row]=[]),e[s.row].push(s),e),{});async function I(e){e.preventDefault();let s=new FormData(e.currentTarget),a={classId:s.get("classId"),subject:s.get("subject"),examType:s.get("subject"),examDate:s.get("date"),startTime:s.get("time"),room:s.get("room"),confirmed:!1};(await _(a)).success?(w({title:"Exam added (Note: Ensure Class ID is valid)"}),f(!1)):w({title:"Error adding exam",variant:"destructive"})}let S=y.slice(0,2).map(e=>{var s;return{id:e.id,classNumber:(null==(s=e.class)?void 0:s.className)||"Class",title:e.subject,date:e.examDate.toLocaleDateString(),time:e.startTime,daysLeft:Math.ceil((e.examDate.getTime()-new Date().getTime())/864e5),color:C[e.colorIndex%C.length].split(" ")[0]}});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,t.jsx)("span",{children:"Maham"}),(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-foreground font-medium",children:"Exams"})]}),(0,t.jsxs)("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold","data-testid":"text-page-title",children:"Exams"}),(0,t.jsx)("p",{className:"text-muted-foreground text-sm mt-1",children:"Manage examination schedules"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(d.$,{variant:"outline",size:"sm","data-testid":"button-search",children:(0,t.jsx)(u.p,{type:"search",placeholder:"Search...",className:"h-8 w-40 border-0 bg-transparent focus-visible:ring-0"})}),(0,t.jsxs)(h.lG,{open:g,onOpenChange:f,children:[(0,t.jsx)(h.zM,{asChild:!0,children:(0,t.jsxs)(d.$,{size:"sm","data-testid":"button-add-exam",children:[(0,t.jsx)(b.A,{className:"h-4 w-4 mr-1"}),"Add new exam"]})}),(0,t.jsxs)(h.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsx)(h.c7,{children:(0,t.jsx)(h.L3,{children:"Add New Exam"})}),(0,t.jsxs)("form",{onSubmit:I,className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(p.J,{htmlFor:"class",children:"Class ID"}),(0,t.jsx)(u.p,{name:"classId",placeholder:"Class UUID",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(p.J,{htmlFor:"subject",children:"Subject"}),(0,t.jsx)(u.p,{name:"subject",id:"subject",placeholder:"e.g., Math Exam",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(p.J,{htmlFor:"date",children:"Date"}),(0,t.jsx)(u.p,{name:"date",id:"date",type:"date",required:!0})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(p.J,{htmlFor:"time",children:"Time"}),(0,t.jsx)(u.p,{name:"time",id:"time",type:"time",required:!0})]})]}),(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)(p.J,{htmlFor:"room",children:"Room"}),(0,t.jsx)(u.p,{name:"room",id:"room",placeholder:"e.g., Room 101"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-2 mt-4",children:[(0,t.jsx)(d.$,{variant:"outline",type:"button",onClick:()=>f(!1),children:"Cancel"}),(0,t.jsx)(d.$,{type:"submit",children:"Add Exam"})]})]})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsx)("div",{className:"lg:col-span-2 space-y-4",children:(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between gap-4 pb-4",children:[(0,t.jsx)(l.ZB,{className:"text-lg font-semibold",children:"Exam Calendar"}),(0,t.jsxs)(d.$,{variant:"outline",size:"sm","data-testid":"button-filter",children:[(0,t.jsx)(N.A,{className:"h-4 w-4 mr-1"}),"Filter",(0,t.jsx)(i.E,{variant:"secondary",className:"ml-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs",children:y.length})]})]}),(0,t.jsxs)(l.Wu,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-6 overflow-x-auto pb-2",children:[(0,t.jsx)(d.$,{variant:"ghost",size:"icon",className:"shrink-0",children:(0,t.jsx)(c.A,{className:"h-4 w-4"})}),E.map(e=>(0,t.jsx)(d.$,{variant:x===e?"default":"ghost",size:"sm",className:"shrink-0",onClick:()=>j(e),children:e},e)),(0,t.jsx)(d.$,{variant:"ghost",size:"icon",className:"shrink-0",children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[Object.entries(A).map(e=>{let[s,a]=e;return(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex items-start gap-4",children:[(0,t.jsxs)("span",{className:"text-sm text-muted-foreground w-6 pt-4 shrink-0",children:["Row ",s]}),(0,t.jsx)("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>(0,t.jsx)(D,{exam:e},e.id))})]})},s)}),0===y.length&&(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:"No exams scheduled."})]})]})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(l.Zp,{children:[(0,t.jsx)(l.aR,{className:"flex flex-row items-center justify-between gap-4 pb-2",children:(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(l.ZB,{className:"text-base font-semibold",children:"Calendar"})})}),(0,t.jsx)(l.Wu,{className:"p-2",children:(0,t.jsx)(o,{mode:"single",selected:a,onSelect:m,className:"rounded-md"})})]}),(0,t.jsx)(l.Zp,{children:(0,t.jsx)(l.aR,{className:"flex flex-row items-center justify-between gap-4 pb-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"*"}),(0,t.jsxs)(l.ZB,{className:"text-sm font-medium",children:[y.length," Exams total"]})]})})}),(0,t.jsxs)(l.Zp,{children:[(0,t.jsxs)(l.aR,{className:"flex flex-row items-center justify-between gap-4 pb-4",children:[(0,t.jsx)(l.ZB,{className:"text-base font-semibold",children:"Upcoming exams"}),(0,t.jsx)(d.$,{variant:"outline",size:"sm",children:(0,t.jsx)(N.A,{className:"h-4 w-4"})})]}),(0,t.jsx)(l.Wu,{className:"space-y-3",children:S.map(e=>(0,t.jsx)("div",{className:"p-4 rounded-xl ".concat(e.color," border border-transparent"),children:(0,t.jsx)("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(i.E,{variant:"outline",className:"text-xs font-medium bg-white/50 dark:bg-black/20",children:e.classNumber}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:e.title}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-1 text-xs text-muted-foreground",children:[(0,t.jsx)(v.A,{className:"h-3 w-3"}),(0,t.jsxs)("span",{children:[e.date," - ",e.time]})]})]})]})})},e.id))})]})]})]})]})}},81873:(e,s,a)=>{Promise.resolve().then(a.bind(a,73814))}},e=>{e.O(0,[999,637,513,790,748,523,441,255,358],()=>e(e.s=81873)),_N_E=e.O()}]);